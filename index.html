<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GHILOFOS APP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Inter:wght@400;900&display=swap');
        
        body { background-color: #000; color: white; font-family: 'Inter', sans-serif; margin: 0; overflow: hidden; }
        
        .main-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: url('ailias.jpg') no-repeat center center;
            background-size: cover;
            filter: brightness(0.5);
            z-index: -1;
        }

        .glass-panel {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .temp-text {
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 20px rgba(255,255,255,0.3);
        }

        .status-dot {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.5; }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body class="h-screen flex flex-col justify-between">
    <div class="main-bg"></div>

    <div class="p-8 pt-12 text-center">
        <h1 class="text-3xl font-black tracking-tighter uppercase italic text-blue-400">Î“Î—Î›ÎŸÎ¦ÎŸÎ£</h1>
        <div class="flex items-center justify-center gap-2 mt-1">
            <div class="w-2 h-2 bg-green-500 rounded-full status-dot"></div>
            <span id="update-time" class="text-[10px] font-bold uppercase tracking-widest opacity-60">Î‘ÎÎ‘Î–Î—Î¤Î—Î£Î— Î£Î¤Î‘Î˜ÎœÎŸÎ¥...</span>
        </div>
    </div>

    <div class="flex flex-col items-center">
        <div id="temp-val" class="temp-text text-8xl font-bold tracking-tighter">--Â°</div>
        <div id="weather-desc" class="text-sm uppercase tracking-[0.4em] opacity-80 mt-2 font-light">Î¦ÎŸÎ¡Î¤Î©ÎÎ•Î™...</div>
    </div>

    <div class="glass-panel p-6 pb-12 rounded-t-[40px]">
        <div class="grid grid-cols-2 gap-4">
            <button onclick="window.location.href='https://gilofos.github.io/weather-gilofos/'" class="bg-white/5 py-6 rounded-3xl flex flex-col items-center border border-white/10 active:scale-95 transition-all">
                <span class="text-2xl">ğŸ“Š</span>
                <span class="text-[10px] font-bold mt-2 uppercase tracking-widest text-blue-300">Î Î»Î®ÏÎ· Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î±</span>
            </button>
            <button onclick="window.location.href='http://gilofos.com'" class="bg-white/5 py-6 rounded-3xl flex flex-col items-center border border-white/10 active:scale-95 transition-all">
                <span class="text-2xl">ğŸ </span>
                <span class="text-[10px] font-bold mt-2 uppercase tracking-widest text-blue-300">Ghilofos.com</span>
            </button>
        </div>
        <p class="text-[9px] text-center mt-6 opacity-30 uppercase tracking-[0.2em]">Live Data by Achilleas Station</p>
    </div>

    <script>
        const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT2yD6-4R9x_H6Xm0m-rL-y1-pL-Bf-q_E-W8-Y-9-Y/pub?output=csv';
        let lastKnownTemp = null;

        async function updateData() {
            try {
                // Fetch Î¼Îµ timestamp Î³Î¹Î± Î½Î± Î¼Î·Î½ Ï€Î±Î¯ÏÎ½ÎµÎ¹ Ï€Î±Î»Î¹Î¬ Î´ÎµÎ´Î¿Î¼Î­Î½Î± (cache)
                const res = await fetch(sheetUrl + '&t=' + Date.now());
                const csv = await res.text();
                const lines = csv.trim().split('\n');
                
                if (lines.length > 1) {
                    const latest = lines[lines.length - 1];
                    // Î§Ï‰ÏÎ¯Î¶Î¿Ï…Î¼Îµ Ï„Î· Î³ÏÎ±Î¼Î¼Î® Î¼Îµ Î²Î¬ÏƒÎ· Ï„Î¿ ÎºÏŒÎ¼Î¼Î±
                    const parts = latest.split(',');
                    
                    if (parts.length >= 2) {
                        const timeStr = parts[0].replace(/"/g, '');
                        const weatherData = parts[1].replace(/"/g, '').split('|');
                        
                        if (weatherData.length >= 2) {
                            const rawTemp = weatherData[0].trim().replace(/[Â°Cc]/g, '');
                            const currentTemp = parseFloat(rawTemp);
                            const description = weatherData[1].trim();

                            // Î•Î›Î•Î“Î§ÎŸÎ£ Î•Î“ÎšÎ¥Î¡ÎŸÎ¤Î—Î¤Î‘Î£ (Î¦Î™Î›Î¤Î¡ÎŸ)
                            // Î‘Î½ Î· Î´Î¹Î±Ï†Î¿ÏÎ¬ ÎµÎ¯Î½Î±Î¹ Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ 8 Î²Î±Î¸Î¼Î¿ÏÏ‚ Î±Ï€ÏŒÏ„Î¿Î¼Î±, ÎµÎ¯Î½Î±Î¹ Î»Î¬Î¸Î¿Ï‚ Î¼Î­Ï„ÏÎ·ÏƒÎ·
                            if (lastKnownTemp !== null && Math.abs(currentTemp - lastKnownTemp) > 8) {
                                console.log("Î‘Ï€ÏŒÏÏÎ¹ÏˆÎ· Î»Î¬Î¸Î¿Ï‚ Î¼Î­Ï„ÏÎ·ÏƒÎ·Ï‚: " + currentTemp);
                            } else {
                                lastKnownTemp = currentTemp;
                                document.getElementById('temp-val').innerText = currentTemp.toFixed(1) + 'Â°';
                                document.getElementById('weather-desc').innerText = description;
                                document.getElementById('update-time').innerText = "LIVE: " + timeStr;
                            }
                        }
                    }
                }
            } catch (err) {
                console.log("Error fetching data");
                document.getElementById('weather-desc').innerText = "Î£Î¦Î‘Î›ÎœÎ‘ Î£Î¥ÎÎ”Î•Î£Î—Î£";
            }
        }

        // Î¤ÏÎ­Ï‡ÎµÎ¹ Î±Î¼Î­ÏƒÏ‰Ï‚ ÎºÎ±Î¹ Î¼ÎµÏ„Î¬ ÎºÎ¬Î¸Îµ 15 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
        updateData();
        setInterval(updateData, 15000);
    </script>
</body>
</html>
