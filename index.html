<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ΣΤΑΘΜΟΣ ΓΗΛΟΦΟΥ - 1050m</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background: #020617; color: white; font-family: sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 1.5rem; }
        .forecast-scroll { overflow-x: auto; white-space: nowrap; }
        .forecast-card { min-width: 80px; text-align: center; padding: 10px; }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen">

    <header class="text-center mb-8">
        <h1 class="text-2xl md:text-4xl font-black tracking-widest uppercase italic text-blue-500">ΜΕΤΕΩΡΟΛΟΓΙΚΟΣ ΣΤΑΘΜΟΣ ΓΗΛΟΦΟΥ</h1>
        <div class="mt-2 inline-block bg-blue-600 px-4 py-1 rounded-full text-[10px] font-bold tracking-[0.2em]">ΥΨΟΜΕΤΡΟ: 1050M</div>
    </header>

    <div class="max-w-4xl mx-auto grid grid-cols-2 gap-4 mb-8">
        <div class="glass p-6 text-center">
            <p class="text-slate-400 text-[10px] uppercase font-bold mb-2 tracking-widest">Θερμοκρασία</p>
            <h2 id="temp" class="text-5xl font-bold">--°C</h2>
        </div>
        <div class="glass p-6 text-center">
            <p class="text-slate-400 text-[10px] uppercase font-bold mb-2 tracking-widest">Υγρασία</p>
            <h2 id="hum" class="text-5xl font-bold">--%</h2>
        </div>
    </div>

    <div class="max-w-4xl mx-auto glass p-6">
        <p class="text-blue-400 text-xs font-bold uppercase mb-4 tracking-widest border-b border-white/10 pb-2">
            <i class="fa-solid fa-clock-rotate-left mr-2"></i>Πρόγνωση ανά ώρα (Γήλοφος)
        </p>
        <div id="hourly-forecast" class="forecast-scroll flex gap-4 pb-2">
            <p class="text-slate-500 text-xs uppercase animate-pulse">Φόρτωση πρόγνωσης...</p>
        </div>
    </div>

    <footer class="mt-8 text-center opacity-30">
        <div id="time" class="text-[9px] font-mono tracking-widest uppercase">ΣΥΝΔΕΣΗ...</div>
    </footer>

    <script>
        // 1. ΑΝΑΝΕΩΣΗ ΔΙΚΩΝ ΣΟΥ ΔΕΔΟΜΕΝΩΝ (ΑΠΟ ΤΟ DATA.JSON)
        async function updateStation() {
            try {
                const r = await fetch('https://raw.githubusercontent.com/gilofos/weather-gilofos/main/data.json?v=' + Date.now());
                const d = await r.json();
                document.getElementById('temp').innerText = d.temp + '°C';
                document.getElementById('hum').innerText = d.humidity + '%';
                document.getElementById('time').innerText = "ΤΕΛΕΥΤΑΙΑ ΛΗΨΗ: " + new Date().toLocaleTimeString('el-GR');
            } catch (e) { console.log("Station Error"); }
        }

        // 2. ΛΗΨΗ ΠΡΟΓΝΩΣΗΣ ΑΠΟ OPEN-METEO (ΣΥΝΤΕΤΑΓΜΕΝΕΣ ΓΗΛΟΦΟΥ)
        async function getForecast() {
            try {
                const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=39.88&longitude=21.82&hourly=temperature_2m,weathercode&forecast_days=1&timezone=auto');
                const data = await res.json();
                const container = document.getElementById('hourly-forecast');
                container.innerHTML = '';

                // Παίρνουμε τις επόμενες 12 ώρες
                for (let i = 0; i < 12; i++) {
                    const hour = new Date(data.hourly.time[i]).getHours() + ":00";
                    const temp = Math.round(data.hourly.temperature_2m[i]);
                    const code = data.hourly.weathercode[i];
                    let icon = 'fa-sun'; // default

                    // Κωδικοί καιρού (WMO)
                    if (code == 0) icon = 'fa-sun text-yellow-400';
                    else if (code <= 3) icon = 'fa-cloud-sun text-gray-300';
                    else if (code <= 48) icon = 'fa-smog text-gray-500';
                    else if (code <= 65) icon = 'fa-cloud-showers-heavy text-blue-400';
                    else if (code <= 77) icon = 'fa-snowflake text-white';
                    else icon = 'fa-cloud-bolt text-yellow-600';

                    container.innerHTML += `
                        <div class="forecast-card">
                            <p class="text-[10px] text-slate-500 mb-2">${hour}</p>
                            <i class="fa-solid ${icon} text-xl mb-2"></i>
                            <p class="text-sm font-bold">${temp}°C</p>
                        </div>
                    `;
                }
            } catch (e) { console.log("Forecast Error"); }
        }

        updateStation();
        getForecast();
        setInterval(updateStation, 30000);
        setInterval(getForecast, 300000); // Πρόγνωση κάθε 5 λεπτά
    </script>
</body>
</html>
